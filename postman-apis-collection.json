{
  "info": {
    "_postman_id": "c1f7b8e1-7d1a-4b0e-8f2a-d9c0e2b1f3a5",
    "name": "CNS - Notification Service API",
    "description": "Complete API collection for testing the Crypto Notification Service (CNS) with JWT Authentication.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Apps",
      "item": [
        {
          "name": "Register App",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"My New Application\",\n  \"createdBy\": \"Admin User\",\n  \"status\": \"ACTIVE\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/apps/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "apps",
                "register"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get All Apps",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/apps",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "apps"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Archive App",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/apps/1/archive",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "apps",
                "1",
                "archive"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Unarchive App",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/apps/1/unarchive",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "apps",
                "1",
                "unarchive"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete App",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/apps/delete/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "apps",
                "delete",
                "1"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Templates",
      "item": [
        {
          "name": "Create Template",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"appId\": 1,\n  \"name\": \"Welcome Template\",\n  \"subject\": \"Welcome {{name}}!\",\n  \"htmlBody\": \"<h1>Hello {{name}}</h1><p>Your code is {{otp}}</p>\",\n  \"status\": \"ACTIVE\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/templates/create",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "templates",
                "create"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get All Templates (Paginated/Filtered)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/templates?appId=1&status=ACTIVE&page=0&size=10",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "templates"
              ],
              "query": [
                {
                  "key": "appId",
                  "value": "1"
                },
                {
                  "key": "status",
                  "value": "ACTIVE"
                },
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Template by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/templates/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "templates",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update Template (Partial)",
          "request": {
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"subject\": \"New Subject for {{name}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/templates/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "templates",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Archive Template",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/templates/1/archive",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "templates",
                "1",
                "archive"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Activate Template",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/templates/1/activate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "templates",
                "1",
                "activate"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Delete Template",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/templates/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "templates",
                "1"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Save Draft",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"appId\": 1,\n  \"name\": \"Draft Template\",\n  \"status\": \"DRAFT\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/templates/draft",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "templates",
                "draft"
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Notifications",
      "item": [
        {
          "name": "Send Single/Multiple (Common)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"apiKey\": \"{{app_api_key}}\",\n  \"templateId\": 1,\n  \"recipient\": \"user@example.com\",\n  \"placeholders\": {\n    \"name\": \"John\",\n    \"otp\": \"1234\"\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/notifications/send",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "notifications",
                "send"
              ]
            },
            "description": "Note: This endpoint is PERMITTED without JWT because it uses API Key auth."
          },
          "response": []
        },
        {
          "name": "Send Personalized Bulk",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"apiKey\": \"{{app_api_key}}\",\n  \"templateId\": 1,\n  \"recipientData\": {\n    \"user1@example.com\": {\n      \"name\": \"Alice\",\n      \"otp\": \"1111\"\n    },\n    \"user2@example.com\": {\n      \"name\": \"Bob\",\n      \"otp\": \"2222\"\n    }\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/notifications/send/bulk",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "notifications",
                "send",
                "bulk"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Retry Notification",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/notifications/1/retry",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "notifications",
                "1",
                "retry"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Notification Logs",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/notifications/logs",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "notifications",
                "logs"
              ]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwt_token}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "jwt_token",
      "value": "your_jwt_here",
      "type": "string"
    },
    {
      "key": "app_api_key",
      "value": "your_app_api_key_here",
      "type": "string"
    }
  ]
}